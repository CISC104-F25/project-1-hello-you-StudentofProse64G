"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23197],{270372:(e,a,t)=>{t.d(a,{r:()=>s});var i=t(559044),r=t(813631);let n=(e,a)=>{let t=e?.isActiveFlexUser,i=e?.isActiveCreditPackUser;if(t||i)return!0;switch(a){case r.W1:return e?.isActiveImageSubUser||e?.isActiveImagePackUser;case r.G_:return!!e?.isActiveVideoPlanUser;case r.on:case r.M9:return!!e?.isActiveMusicPlanUser;default:return!1}},s=e=>{let{asset:a,features:t,bypassAssetCheck:r,assetType:s,isUnlimitedExperience:m}=e,l=r||(0,i.sY)(a),o=n(t,a?(0,i.f0)(a):s),d=!!t?.isUserWithActiveBasicUnlimitedPlan,c=!t?.userId||t?.isFBA||t?.isLapsedAccount;return!!((d&&!o||c&&m)&&l)}},574961:(e,a,t)=>{t.d(a,{Er:()=>g,aR:()=>c,g2:()=>p,x8:()=>o});var i=t(813631),r=t(449080),n=t(113026),s=t(390280),m=t(495060),l=t(17563);let o=["IN"],d=e=>{switch(e.toLowerCase()){case i.$E:return l.XJ.Illustration;case i.vo:return l.XJ.Photo;case i.kc:return l.XJ.Vector;default:return l.XJ.Photo}},c=e=>{let{asset:a,isBot:t,isLoggedInUser:r,isMobile:n,region:s}=e;if(t)return!1;let m=[i.$E,i.kc,i.vo].includes(a?.imageType),l=!o.includes(s)&&!n;return m&&(r||l)},p=e=>{let{asset:a,limit:t=s.hI,locale:i,region:n,searchTerm:m="",subscriptionProduct:o,isFilterByUnlimited:c=!1}=e,{id:p,imageType:g=l.XJ.Photo}=a||{},u="undefined"===m?"":m,_=RegExp("^id:*").test(u);return{recommendationAnchors:{classicIds:[p],locale:i,mediaType:l.g9.Image,...o?{subscriptionProduct:o}:{},...!_&&{text:u}},recommendationCountry:n,recommendationFilters:{channels:[l.Tm.Shutterstock],imageType:d(g),mediaType:l.g9.Image,...c&&{content:{tiers:r.dV}}},recommendationLimit:t,recommendationStrategy:l.xp.Style}},g=e=>{let{recommendations:a}=e,{response:t,internals:i}=a||{},{results:r,tracer:s}=t||{},{resultsCount:l}=i?.providers?.[0]||{};return r?.reduce((e,a)=>{let{media:t}=a;if(t?.__typename===n.Vi){let a={...(0,m.PU)(t),meta:{trackingId:s,totalCount:{images:l}}};e.push(a)}return e},[])||[]}},653239:(e,a,t)=>{t.d(a,{Q:()=>n});var i=t(845788),r=t(571024);let n=t.n(r)()(()=>Promise.all([t.e(27510),t.e(64984),t.e(32584),t.e(86916),t.e(15034)]).then(t.bind(t,828863)).then(e=>({default:e.RelatedSections})),{loadableGenerated:{webpack:()=>[828863]},loading:i.B})},707153:(e,a,t)=>{t.d(a,{G:()=>q});var i=t(813631),r=t(390280),n=t(559044),s=t(574961);let m=JSON.parse('{"id":"81a54caf2d8bafe1c2366ff835f330bc83876fc0e874b8b3b2652c758489ad1d","type":"query","name":"FetchRelatedAssets","source":"query FetchRelatedAssets($where:MediaWhere!,$sameArtistWhere:SearchWhere!,$sameModelWhere:SearchWhere!,$topSimilarCount:Int,$recommendationAnchors:RecommendationAnchors,$recommendationCountry:CountryCode,$recommendationFilters:RecommendationFilters!,$recommendationLimit:UnsignedInt,$recommendationStrategy:StrategyEnum!,$fetchRecommendations:Boolean! = false,$fetchSameArtist:Boolean! = false,$fetchSameModel:Boolean! = false,$fetchSimilarGeneratedImages:Boolean! = false,$fetchSimilarImages:Boolean! = false,$fetchSimilarVideos:Boolean! = false,$similarImagesCollectionType:CollectionTypeEnum! = APPROVED,$similarVideosCollectionType:CollectionTypeEnum! = APPROVED_VIDEO){creativeImages(where:$where){data{...SimilarGeneratedImagesFragment @include(if:$fetchSimilarGeneratedImages)...SimilarImagesFragment @include(if:$fetchSimilarImages)...SimilarVideosFragment @include(if:$fetchSimilarVideos)__typename}__typename}sameArtist:creativeMediaSearch(where:$sameArtistWhere)@include(if:$fetchSameArtist){...SearchResultsFragment __typename}sameModel:creativeMediaSearch(where:$sameModelWhere)@include(if:$fetchSameModel){...SearchResultsFragment __typename}recommendations(anchors:$recommendationAnchors strategy:$recommendationStrategy country:$recommendationCountry limit:$recommendationLimit filters:$recommendationFilters)@include(if:$fetchRecommendations){...RecommendationFragment __typename}}fragment SimilarGeneratedImagesFragment on CreativeImage{similarGeneratedImages:similarImages(top:$topSimilarCount collectionType:GENERATED){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}}}}__typename}fragment SimilarEntityIdFragment on CreativeSimilarImageResult{entities{classicId __typename}__typename}fragment CreativeImageMediaFieldsFragment on CreativeImage{...CreativeImageBasicInfoFragment...CreativeImageBooleanFieldsFragment sellableImageSizes{...CreativeImageSellableSizesFragment __typename}__typename}fragment CreativeImageBasicInfoFragment on CreativeImage{__typename classicId aspect aspectRatio contributorId description thumbnailImageUrlTemplate secureWatermarkImageUrl keywords metadataStatus{mainStatus qualifierStatus __typename}channels contentTier{id __typename}contentTiers}fragment CreativeImageBooleanFieldsFragment on CreativeImage{exclusiveToSstk is3dSpinner isAdult isEditorial isGenerated isIllustration isIpReviewed isVector __typename}fragment CreativeImageSellableSizesFragment on SellableImageSize{...on SellableCreativeImageJpgSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImagePngSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImagePSDSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImageVectorSize{__typename name displayName fileSize humanFileSize format}__typename}fragment SimilarImagesFragment on CreativeImage{similarImages(top:$topSimilarCount collectionType:$similarImagesCollectionType){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}}}}__typename}fragment SimilarVideosFragment on CreativeImage{similarVideos:similarImages(top:$topSimilarCount collectionType:$similarVideosCollectionType){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeVideo{...CreativeVideoMediaFieldsFragment __typename}}}}__typename}fragment CreativeVideoMediaFieldsFragment on CreativeVideo{...CreativeVideoBasicInfoFragment...CreativeVideoBooleanFieldsFragment sellableVideoSizes{...CreativeVideoSellableSizesFragment __typename}__typename}fragment CreativeVideoBasicInfoFragment on CreativeVideo{__typename type classicId aspect aspectRatio contributorId description addedDate channels duration previewImageUrl keywords secureWatermarkUrl{mp4 webm __typename}translatedDescriptions{availableTranslatedDescriptions{lang description __typename}description __typename}contentTiers}fragment CreativeVideoBooleanFieldsFragment on CreativeVideo{exclusiveToSstk isAdult isEditorial isIpReviewed __typename}fragment CreativeVideoSellableSizesFragment on SellableCreativeVideoSize{name displayName format videoCodec fileSize humanFileSize fps height{pixels __typename}width{pixels __typename}__typename}fragment SearchResultsFragment on SearchResponse{results{docs{...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}__typename}__typename}__typename}fragment RecommendationFragment on RecommendationResponse{response{results{media{...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}__typename}__typename}tracer __typename}internals{providers{resultsCount __typename}__typename}__typename}"}');var l=t(17563),o=t(965461),d=t(82281),c=t.n(d);let{publicRuntimeConfig:{apiEndpoints:p}}=c()(),g=e=>[i.$E,i.kc,i.vo].includes(e?.imageType),u=e=>!!e?.releases?.length&&[i.$E,i.kc,i.vo].includes(e?.imageType),_=e=>(0,n.Bq)({asset:e}),y=e=>(0,n.Bq)({asset:e})||[i.$E,i.kc,i.vo].includes(e?.imageType),h=e=>(0,n.Bq)({asset:e})||[i.$E,i.kc,i.vo].includes(e?.imageType),S=e=>{let{asset:a,isMobile:t,isSameArtist:i,isSameModel:n,locale:s,region:m,isFilterByUnlimited:o}=e,{contributorId:d="",id:c,keywords:p,releases:g}=a||{},u=t?r.Zh:r.SE,_=t?r.Zh:r.d3,y={cache:!0,countryCode:m,language:s,mediaType:l.$9.Image,rows:i?_:u,safeSearch:{isSafe:!0},sortOrder:l.ti.Popular,start:0,...o&&{classicContentTiers:{anyOf:[l.i2.UnlimitedV_0_1]}}};return i&&d?{...y,contributors:{ids:{anyOf:[d]}},query:p?.[0]||""}:n&&g?{...y,classicIds:{noneOf:[c]},releases:{classicModelReleaseIds:{anyOf:g.map(String)}}}:y},f=e=>{let{asset:a,brand:t,experiments:i,headers:r={},isBot:n,isLoggedInUser:d=!1,isMobile:c=!1,locale:f,region:I,searchTerm:v="",subscriptionProduct:C,topSimilarCount:F=10,isFilterByUnlimited:b=!1}=e,$=(0,s.g2)({asset:a,locale:f,region:I,searchTerm:v,subscriptionProduct:C,isFilterByUnlimited:b}),A=S({asset:a,isMobile:c,isSameArtist:!0,locale:f,region:I,isFilterByUnlimited:b}),T=S({asset:a,isMobile:c,isSameModel:!0,locale:f,region:I,isFilterByUnlimited:b}),R=(0,s.aR)({asset:a,isBot:n,isLoggedInUser:d,isMobile:c,region:I}),V=g(a),E=u(a),w=_(a),z=y(a),M=h(a),P={where:{classicId:a.id},...{fetchRecommendations:R,...$},...{fetchSameArtist:V,sameArtistWhere:A},...{fetchSameModel:E,sameModelWhere:T},...w&&{fetchSimilarGeneratedImages:w,topSimilarCount:F},...z&&{fetchSimilarImages:z,topSimilarCount:F,...b&&{similarImagesCollectionType:l.e9.UnlimitedImage}},...M&&{fetchSimilarVideos:M,topSimilarCount:F,...b&&{similarVideosCollectionType:l.e9.UnlimitedVideo}}};return{formattedRequest:{document:m.source,requestHeaders:{...(0,o.C)({brand:t,experiments:i,page:"",isBot:n}),...r},url:`${p.graphGateway}/graphql`,variables:P},query:m.source,variables:P}};var I=t(705992),v=t(898257),C=t(581298),F=t(270372),b=t(184905),$=t(495060),A=t(215048);let T=e=>(e??[]).map(e=>(0,A.u)(e)),R=e=>(e??[]).map(e=>(0,$.PU)(e)),V=e=>{let{creativeImages:{data:a}={data:[]},recommendations:t,sameArtist:i,sameModel:r}=e||{},n=(0,s.Er)({recommendations:t})||[],m=R(i?.results?.docs)||[],l=R(r?.results?.docs)||[],o=T(a?.[0]?.similarImages?.entities)||[],d=T(a?.[0]?.similarVideos?.entities)||[];return{personalizedImages:n,sameArtist:m,sameModel:l,visuallySimilar:o,visuallySimilarGenerated:T(a?.[0]?.similarGeneratedImages?.entities)||[],visuallySimilarVideos:d}};var E=t(498848),w=t(323069),z=t(946131),M=t(778042),P=t(377981),k=t(903074),B=t(962316),x=t(12482);let L=(0,B.NF)()?3e3:15e3,{publicRuntimeConfig:{_app:{name:U}}}=c()(),G={personalizedImages:[],sameArtist:[],sameModel:[],visuallySimilar:[],visuallySimilarGenerated:[],visuallySimilarVideos:[]},N=(e,a,t)=>{let i=e&&"object"==typeof e&&"response"in e?e?.response:void 0;if(i){let e=i?.errors||[],t=i?.extensions?.valueCompletion||[],r={message:i?.errors?.[0]?.message||"N/A"};e.forEach((e,a)=>{r[`error${a+1}`]=`${e.message}, Path: ${e.path?.join(".")||"N/A"}`}),t.forEach((e,a)=>{r[`valueCompletion${a+1}`]=`${e.message}, Path: ${e.path?.join(".")||"N/A"}`}),a({actionName:"FetchRelatedAssets - GraphQLError",customAttributes:r});let n=i?.data;if(n)return V(n)}if(e instanceof Error){if("AbortError"===e.name)return a({actionName:"FetchRelatedAssets - Timeout",customAttributes:{message:"Fetch request timed out",timeoutDuration:t}}),G;a({actionName:"FetchRelatedAssets - Error",customAttributes:{message:e.message||"unknown error occurred"}});let r=i?.data;if(r)return V(r)}return G},q=e=>{let{asset:a,shouldFetch:t=!0}=e,{region:i,locale:n}=(0,C.Y)(),{isGoodBot:s}=(0,v.l)(),{brand:m}=(0,w.P)(),l=(0,M.a)(),{type:o}=a||{},d=(0,P.h)(),{getSearchContext:c}=(0,E.J)(),{search_term:p}=c?.()||{},g=l?r.Zh:2*r.SE,u=(0,k.J)(),_=(0,b.H)(),y=(0,F.r)({asset:a,features:u,isUnlimitedExperience:_}),h=u?.subscriptions?.[0]?.product?.name,{formattedRequest:{requestHeaders:S,variables:$},query:A}=f({asset:a,brand:m,experiments:{},headers:{[I.E3]:`${U}/asset-details-page/related-assets`,[I.ef]:`${o}-related-assets`},isBot:s,isMobile:l,isLoggedInUser:!!u?.userType,locale:n,region:i,searchTerm:"undefined"===p?"":p,subscriptionProduct:h,topSimilarCount:g,isFilterByUnlimited:y}),T=(0,z.s)("/"),R=[A],B=s?15e3:L,G=async()=>{try{let e=new AbortController,a=setTimeout(()=>e.abort(),B),t=await T(A,$,{headers:S,signal:e.signal});return clearTimeout(a),V(t)}catch(e){return N(e,d,B)}};return(0,x.I)({enabled:t,queryKey:R,queryFn:G})}},817939:(e,a,t)=>{t.r(a),t.d(a,{RelatedSectionsToUse:()=>d});var i=t(406029),r=t(653239),n=t(845788),s=t(898257),m=t(559044),l=t(707153),o=t(778042);let d=e=>{let{asset:a,labels:t,isLocal:d,getSearchTermPathProps:c}=e,p=(0,m.Uh)(a),{isGoodBot:g}=(0,s.l)(),u=(0,o.a)(),{data:_={},isLoading:y}=(0,l.G)({asset:a,shouldFetch:!g&&!p})||{},{sameModel:h=[],sameArtist:S=[],visuallySimilar:f=[],visuallySimilarVideos:I=[],visuallySimilarGenerated:v=[],personalizedImages:C=[]}=g?a:_,F=!u&&g;return y?(0,i.jsx)(n.B,{}):!p&&(y||p)?null:(0,i.jsx)(r.Q,{asset:a,gridSpacing:4,labels:t,personalizedImages:C,sameArtistAssets:S,sameModel:h,showSimilarVideos:!0,visuallySimilar:f,visuallySimilarMaxRows:2,visuallySimilarVideos:I,visuallySimilarGenerated:v,withInlineCta:!p,isLocal:d,useCssGrid:F,maxRows:F?null:2,getSearchTermPathProps:c,isCustomMobileGridWidth:!0})}}}]);
//# sourceMappingURL=ImageRelatedSectionsToUse.ca63a28c7aca04ea.js.map